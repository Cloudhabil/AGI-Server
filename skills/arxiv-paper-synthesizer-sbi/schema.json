{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ArXiv Paper Synthesizer - Input/Output Schema",
  "type": "object",

  "properties": {
    "capability": {
      "type": "string",
      "enum": [
        "initialize_synthesis",
        "run_hunter_pass",
        "run_dissector_pass",
        "run_synthesizer_pass",
        "evaluate_rigor",
        "iterate_n_passes",
        "generate_learning_report"
      ],
      "description": "Which capability to invoke"
    },

    "papers": {
      "type": "array",
      "description": "Array of paper objects to synthesize",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique paper identifier (e.g., 'gpia_sovereign_logic_v1')"
          },
          "title": {
            "type": "string",
            "description": "Paper title"
          },
          "content": {
            "type": "string",
            "description": "Raw LaTeX or markdown content"
          },
          "claims": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "claim": { "type": "string", "description": "The empirical or theoretical claim" },
                "evidence_level": {
                  "type": "string",
                  "enum": ["theoretical", "preliminary", "validated", "unargued"],
                  "description": "Current support level for this claim"
                }
              }
            },
            "description": "Key claims requiring validation"
          }
        },
        "required": ["id", "title"]
      }
    },

    "n_passes": {
      "type": "integer",
      "minimum": 1,
      "maximum": 10,
      "default": 3,
      "description": "Number of synthesis iterations to run"
    },

    "rigor_target": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "default": 0.85,
      "description": "Target rigor score (0=draft, 1=publishable)"
    },

    "convergence_threshold": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 0.1,
      "default": 0.02,
      "description": "Stop iteration if improvement < threshold"
    },

    "arxiv_field": {
      "type": "string",
      "enum": ["cs.AI", "cs.CY", "math.NT", "physics.gen-ph", "q-bio.NC"],
      "default": "cs.AI",
      "description": "Target ArXiv subject category"
    },

    "focus_areas": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Areas to prioritize (e.g., 'mathematical_rigor', 'empirical_validation', 'citations')"
    }
  },

  "required": ["capability", "papers"],

  "definitions": {
    "synthesis_result": {
      "type": "object",
      "properties": {
        "paper_id": { "type": "string" },
        "pass_number": { "type": "integer" },
        "rigor_score": { "type": "number", "minimum": 0, "maximum": 1 },
        "findings": {
          "type": "object",
          "properties": {
            "unargued_claims": { "type": "array", "items": { "type": "string" } },
            "missing_citations": { "type": "array", "items": { "type": "string" } },
            "notation_inconsistencies": { "type": "array", "items": { "type": "string" } },
            "structural_issues": { "type": "array", "items": { "type": "string" } }
          }
        },
        "improvements": { "type": "array", "items": { "type": "string" } },
        "synthesized_latex": { "type": "string", "description": "Improved LaTeX content" }
      }
    }
  }
}
