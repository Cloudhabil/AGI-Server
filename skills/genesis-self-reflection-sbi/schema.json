{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Genesis Self-Reflection - Input/Output Schema",
  "type": "object",

  "properties": {
    "capability": {
      "type": "string",
      "enum": [
        "introspect_papers",
        "validate_claims",
        "map_closed_fields",
        "map_open_frontiers",
        "generate_science_topology",
        "self_critique"
      ],
      "description": "Which self-reflection capability to invoke"
    },

    "papers_directory": {
      "type": "string",
      "default": "arxiv_submission",
      "description": "Directory containing GPIA's papers"
    },

    "rigor_threshold": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "default": 0.80,
      "description": "Rigor score threshold for 'field closed' classification"
    },

    "include_self_critique": {
      "type": "boolean",
      "default": true,
      "description": "Include honest limitations assessment"
    },

    "output_format": {
      "type": "string",
      "enum": ["markdown", "latex", "json", "html"],
      "default": "markdown",
      "description": "Format for topology document"
    }
  },

  "required": ["capability"],

  "definitions": {
    "closed_field": {
      "type": "object",
      "properties": {
        "field_name": { "type": "string" },
        "description": { "type": "string" },
        "claim": { "type": "string", "description": "What GPIA resolved" },
        "evidence": { "type": "array", "items": { "type": "string" } },
        "rigor_score": { "type": "number" },
        "theoretical_grounding": { "type": "array", "items": { "type": "string" } },
        "empirical_support": { "type": "array", "items": { "type": "string" } },
        "limitations": { "type": "array", "items": { "type": "string" } }
      }
    },

    "open_frontier": {
      "type": "object",
      "properties": {
        "frontier_name": { "type": "string" },
        "description": { "type": "string" },
        "why_open": { "type": "string", "description": "Why GPIA couldn't close it" },
        "required_to_close": { "type": "array", "items": { "type": "string" } },
        "related_open_problems": { "type": "array", "items": { "type": "string" } },
        "connection_to_closed_fields": { "type": "array", "items": { "type": "string" } }
      }
    }
  }
}
